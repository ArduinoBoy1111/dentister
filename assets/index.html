<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dentister</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main style="display: flex;width: 100%;">
        <div class="today-list">
           <div class="card">
                <div style="display: flex;align-items: center;justify-content: center;width: 100%;">
                    <div class="flex-line"></div>
                    <h1 id="current_day_header">غير معروف</h1>
                    <div class="flex-line"></div>
                </div>
           </div>
        </div>
        <div class="main-content-area">
            <div style="display: flex;width: 100%;justify-content: space-between;align-items: center;">
                <button style="width: 8%;height: 6%;" onclick="changeMonth(1)"><</button>
                <h1 id="current_month" style="font-size: 4vw;"></h1>
                <button style="width: 8%;height: 6%;" onclick="changeMonth(-1)">></button>
            </div>
            <div class="display" dir="ltr" style="display:flex;flex-wrap:wrap;width:100%;height:96%;justify-content: space-evenly;align-items: start;">

            </div>
        </div>
        <div class="sidebar">
            
            <ul>
                <li><button onclick="changeView('index')">الصفحة الرئيسية</button></li>
                <li><button onclick="changeView('patients')">الارسال و اللاستقبال</button></li>
            </ul>

        </div>
    </main>
    
    <script>
        today_header = document.getElementById('current_day_header');

        function changeView(view) {
            window.pywebview.api.navigate(view);
        }
        const now = new Date();

        const monthNames = [
          "كانون الثاني",  // January
          "شباط",        // February
          "آذار",        // March
          "نيسان",       // April
          "أيار",        // May
          "حزيران",      // June
          "تموز",        // July
          "آب",          // August
          "أيلول",       // September
          "تشرين الأول",  // October
          "تشرين الثاني",  // November
          "كانون الأول"   // December
        ];
        let month = now.getMonth() + 1;
        let year = now.getFullYear();
        const daysInMonth = new Date(year, month, 0).getDate();
        document.getElementById('current_month').textContent = " (" + month + ") " + monthNames[now.getMonth()]  + " " + now.getFullYear();
        createCalendar();
        function createCalendar() {
            const daysInMonth = new Date(year, month, 0).getDate();
            document.querySelector('.display').innerHTML = ''; // Clear previous content
            document.getElementById('current_month').textContent = " (" + month + ") " + monthNames[month - 1] + " " + year;
            for (let i = 1; i <= daysInMonth; i++) {
               const daySquare = document.createElement('div');
               const addrtag = document.createElement('button');
               addrtag.onclick = () => {
                   today_header.textContent = "اليوم: " + i + "/" + monthNames[month - 1] + "/" + year;
                   window.pywebview.api.updateDay(i);
               };
               addrtag.style.textDecoration = 'none';
               daySquare.className = 'day-square';
               daySquare.textContent = i;
               addrtag.appendChild(daySquare);
               document.querySelector('.main-content-area .display').appendChild(addrtag);
           }
        }

        function changeMonth(direction) {
            month += direction;
            if (month < 1) {
                month = 12;
                year -= 1;
            } else if (month > 12) {
                month = 1;
                year += 1;
            }
            createCalendar();
        }
    </script>
</body>
</html>